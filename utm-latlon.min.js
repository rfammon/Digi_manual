!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Utm=e()}(this,function(){"use strict";var t={k0:6378137,k:1-(f=1/298.257223563),f:f=1/298.257223563};t.e=Math.sqrt(2*t.f-t.f*t.f),t.e2=t.e*t.e,t.e4=t.e2*t.e2,t.e6=t.e2*t.e4,t.e_2=t.e2/(1-t.e2);var e={N:function(e,a,r){return t.k0*t.k*(e[0]*(a-r)+e[1]*Math.sin(2*(a-r))+e[2]*Math.sin(4*(a-r))+e[3]*Math.sin(6*(a-r)))},M:function(e){return t.k0*t.k*(t.A*(e-t.B*Math.sin(2*e)+t.C*Math.sin(4*e)-t.D*Math.sin(6*e)))}};t.n=t.f/(2-t.f),t.n2=t.n*t.n,t.n3=t.n2*t.n,t.n4=t.n3*t.n,t.n5=t.n4*t.n,t.n6=t.n5*t.n,t.G=(t.k0*(1+t.n2/4+t.n4/64))/(1+t.n),t.g=[t.n/2-2/3*t.n2+5/16*t.n3+41/180*t.n4-127/288*t.n5+7891/37800*t.n6,-13/48*t.n2+3/5*t.n3-437/1440*t.n4+46/105*t.n5-111871/387080*t.n6,61/240*t.n3-103/140*t.n4+15061/26880*t.n5-167603/181440*t.n6,-49561/161280*t.n4+179/168*t.n5-6601661/7257600*t.n6,34729/80640*t.n5-3418889/1935360*t.n6,-212378941/319334400*t.n6],t.A=t.k/(1+t.n)*(1+t.n2/4+t.n4/64+t.n6/256),t.B=3/2*t.n-27/32*t.n3+269/512*t.n5,t.C=21/16*t.n2-55/32*t.n4+158863/262144*t.n6,t.D=151/96*t.n3-417/128*t.n5,t.E=1097/512*t.n4-15543/2560*t.n6,t.F=8005/1536*t.n5,t.G_prime=4363/6144*t.n6;var a=[1/2*t.n-13/48*t.n2+61/240*t.n3-49561/161280*t.n4+34729/80640*t.n5-212378941/319334400*t.n6,13/48*t.n2-3/5*t.n3+557/1440*t.n4-103/140*t.n5+25333/26880*t.n6,61/240*t.n3-103/140*t.n4+15061/26880*t.n5-167603/181440*t.n6,49561/161280*t.n4-179/168*t.n5+799109/725760*t.n6,34729/80640*t.n5-3418889/1935360*t.n6,212378941/319334400*t.n6],r=function(a,r){return a*(180/Math.PI)+(r?3:0)},n=function(t){return t*Math.PI/180};return{fromLatLon:function(o,i,s){s=s||function(t,e){return 1+Math.floor((e+180)/6)}(o,i);var h=n(o),u=n(i),c=n(r(s,1)*6-183),l=Math.cos(h),M=Math.atan(Math.tan(h)/Math.cos(u-c)),p=function(e,a){return.5*Math.log((1+e)/(1-e))}(l*Math.sin(u-c)),d=t.k*t.G*M,f=e.N(t.g,M,0),m=e.N(a,M,M);return{easting:5e5+t.k*t.G*(p+.5*m*p*p),northing:h<0?1e7+d+f*l*Math.cos(u-c)*p:d+f*l*Math.cos(u-c)*p,zoneNum:s,zoneLetter:function(t){return"CDEFGHJKLMNPQRSTUVWXX"[Math.floor(t/8+2.5)]}(o)}},toLatLon:function(o,i,s,h,u){u=u||"N",i-=5e5;var c=h.charCodeAt(0);u="S"===u||c<"N".charCodeAt(0),c>="X".charCodeAt(0)?i=42e5:c<="C".charCodeAt(0)&&(i=-42e5),s=s||function(t){return 1+Math.floor((t+180)/6)}(0,r(s,1)*6-183);var l=i/(t.G*t.k),M=(u?e.M(0)-i/t.k:i/t.k)/t.G+e.N(a,0,0),p=e.N(a,M,M),d=e.N(t.g,M,0),f=e.N(a,M,0),m=Math.asin(Math.sin(M)/Math.cosh(l)),g=function(e,a){return Math.atan(e/Math.cos(a))}(Math.sinh(l),m),v=function(e,a){return Math.atan(Math.sinh(e)*Math.tan(a))}(l,m),b=m-f*Math.tan(m)/t.k*(l*l/2+p*l*l*l*l/24),y=n(r(s,1)*6-183);return{latitude:b*180/Math.PI,longitude:r(y+g)}}}}});